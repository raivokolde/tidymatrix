% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/flatten.R
\name{to_long}
\alias{to_long}
\title{Convert tidymatrix to long-format data.frame}
\usage{
to_long(.data, return_tibble = TRUE)
}
\arguments{
\item{.data}{A tidymatrix object}

\item{return_tibble}{Logical. If TRUE (default), returns tibble. If FALSE,
returns data.frame.}
}
\value{
A data.frame/tibble with m*n rows (where m and n are matrix dimensions)
containing:
\itemize{
\item All row_data columns (with "row." prefix if name conflicts exist)
\item All col_data columns (with "col." prefix if name conflicts exist)
\item A "value" column containing the matrix values
}
}
\description{
Converts a tidymatrix into a long-format data.frame where each row represents
a single matrix cell with its associated row and column metadata. This is
useful for plotting individual data points or performing analyses that
require long-format data.
}
\details{
The conversion always processes the entire matrix regardless of which
component is active. If column names conflict between row_data and col_data,
all row metadata columns are prefixed with "row." and all column metadata
columns are prefixed with "col." to avoid ambiguity.

Matrix values are unwrapped in column-major order (R's default), meaning
all values from column 1, then all values from column 2, etc.
}
\examples{
# Basic conversion to long format
mat <- matrix(1:12, nrow = 4, ncol = 3)
row_data <- data.frame(
  gene_id = paste0("Gene", 1:4),
  gene_type = c("A", "A", "B", "B")
)
col_data <- data.frame(
  sample_id = paste0("Sample", 1:3),
  condition = c("Control", "Treatment", "Control")
)
tm <- tidymatrix(mat, row_data, col_data)

long <- to_long(tm)
head(long)

\dontrun{
# Use in ggplot2 workflow
library(ggplot2)
tm |>
  to_long() |>
  ggplot(aes(x = sample_id, y = value, color = condition)) +
  geom_point() +
  facet_wrap(~gene_id)

# After statistical analysis
results <- tm |>
  activate(rows) |>
  compute_ttest(group_col = "condition", add_to_data = TRUE) |>
  to_long()

# Now filter to significant genes and plot
results |>
  filter(p.adj < 0.05) |>
  ggplot(aes(x = sample, y = value, color = condition)) +
  geom_point() +
  facet_wrap(~gene)
}
}
