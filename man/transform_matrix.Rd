% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/matrix-operations.R
\name{transform_matrix}
\alias{transform_matrix}
\title{Apply a function to the matrix}
\usage{
transform_matrix(.data, fn, ...)
}
\arguments{
\item{.data}{A tidymatrix object}

\item{fn}{A function to apply. When matrix is active, receives the full
matrix. When rows or columns are active, receives one row or column
vector at a time. Must return values with the same dimensions.}

\item{...}{Additional arguments passed to \code{fn}.}
}
\value{
A tidymatrix object with the transformed matrix
}
\description{
Applies a function to the matrix with behavior determined by the active
component:
\itemize{
\item \code{activate(matrix)}: \code{fn} is applied to the entire matrix
at once. Use functions like \code{log}, \code{exp}, \code{sqrt}, or
anonymous functions like \code{\\(x) x^2}.
\item \code{activate(rows)}: \code{fn} is applied independently to each
row vector and must return a vector of the same length.
\item \code{activate(columns)}: \code{fn} is applied independently to each
column vector and must return a vector of the same length.
}
}
\examples{
mat <- matrix(1:12, nrow = 3, ncol = 4)
tm <- tidymatrix(mat)

# Element-wise: apply log to entire matrix
tm |>
  activate(matrix) |>
  transform_matrix(log)

# Row-wise: rank values within each row
tm |>
  activate(rows) |>
  transform_matrix(rank)

# Column-wise: min-max normalize each column to [0, 1]
tm |>
  activate(columns) |>
  transform_matrix(\(x) (x - min(x)) / (max(x) - min(x)))

# Passing extra arguments: round to 2 decimal places
tm |>
  activate(matrix) |>
  transform_matrix(round, digits = 2)
}
